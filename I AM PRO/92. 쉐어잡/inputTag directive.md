---
Created: Invalid date
Updated: Invalid date
---
angular.module('app.directives').directive('inputTag', ['$timeout', function($timeout) {return {restrict: "A",// replace: false,scope: {tags: '=',ngModel: '='},link: function(scope, element, attrs) {// $timeout(function() {// console.log('inputTag $scope.tags = ', scope.tags);// scope.ngModel = angular.copy(scope.tags);// if (scope.ngModel == null || scope.ngModel.length === 0) {// scope.ngModel = '#';// } else {// for (var i in scope.ngModel) {// scope.ngModel[i] = '#' + scope.ngModel[i];// }// }// }, 0);// element.bind('keypress', function(event) {// // console.log('onkeyPress:', event);// if (event.keyCode === 13 || // enter// event.keyCode === 32 || // space// event.keyCode === 51 || // #// event.keyCode === 188) { // ,// // 마지막 문자를 ', #' 으로 치환// event.preventDefault();// }// });// element.bind('keyup', function(event) {// // console.log('onKeyUp:', event.keyCode);// if (event.keyCode === 13 || // enter// event.keyCode === 32 || // space// event.keyCode === 51 || // #// event.keyCode === 188) { // ,// // 이전 맨 마지막 문자가 ,space\#중 하나인 경우 아닌 문자가 나올 때까지 문자 삭제// // regExp으로 담에 바꾸기 ..ㅠㅠ replace...// for (var i = scope.ngModel.length - 1; i > -1; i--) {// var lastCh = scope.ngModel[i];// if (lastCh === ',' || lastCh === ' ' || lastCh === '#') {// var temp = scope.ngModel;// scope.ngModel = temp.slice(0, temp.length - 1);// } else {// break;// }// }// scope.ngModel = (scope.ngModel + (scope.ngModel.length === 0 ? '#' : ',#')).trim();// } else {// // backspace로 내용을 다 지워도 \#은 남음// // 빈칸인데 문자를 입력하면 앞에 \# 붙임// if (scope.ngModel.length === 0) {// scope.ngModel = '#' + scope.ngModel;// }// }// scope.tags = scope.ngModel.replace(/\#/g, '').replace(/\,$/g, '').split(',');// scope.$apply();// });},controller: function($scope, $element) {// 태그에 내용이 없다면 맨 앞에 # 붙이기}};}]);